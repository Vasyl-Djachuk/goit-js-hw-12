{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["'use strict';\nlet indexImage = 0;\nlet objectFromServer;\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallery = document.querySelector(`.gallery`);\nconst loader = document.querySelector(`.loader`);\nloader.classList.remove(`loader`);\n\nconst form = document.querySelector(`.form`);\nform.addEventListener(`submit`, formSearch);\n// ------------------\ndocument\n  .querySelector(`.page-section`)\n  .insertAdjacentHTML(\n    'beforeend',\n    `<button class=\"download-more\">Download more</button>`\n  );\nconst buttonMoreImages = document.querySelector(`.download-more`);\nbuttonMoreImages.addEventListener(`click`, downloadsMoreImages);\n// -----------------\n\nfunction formSearch(event) {\n  event.preventDefault();\n  let userText = event.target.elements.search.value.trim();\n\n  if (userText === ``) {\n    iziToast.show({\n      message: '❌ Field must be filled in',\n      position: `topRight`,\n      color: `red`,\n    });\n    return;\n  }\n\n  form.reset();\n  gallery.innerHTML = ``;\n  buttonMoreImages.classList.remove(`is-visibal`);\n  loader.classList.add(`loader`);\n\n  const parameters = new URLSearchParams({\n    key: `41274788-792c8d92905fcf9da75194117`,\n    q: `${userText}`,\n    image_type: `photo`,\n    orientation: `horizontal`,\n    safesearch: `true`,\n    per_page: 100,\n  }).toString();\n\n  const urlSearch = `https://pixabay.com/api/?${parameters}`;\n  fetch(urlSearch)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n\n      return response.json();\n    })\n    .then(answerFromServer => {\n      if (answerFromServer.hits.length === 0) {\n        loader.classList.remove(`loader`);\n        iziToast.show({\n          message:\n            '❌ Sorry, there are no images matching your search query. Please try again!',\n          position: `topRight`,\n          color: `red`,\n        });\n        buttonMoreImages.classList.remove(`is-visibal`);\n        return;\n      }\n      galleryCreate(answerFromServer.hits);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n// --------------------------------\nfunction galleryCreate(imageArrow) {\n  indexImage = 0;\n  objectFromServer = imageArrow;\n  let displayImage = imageArrow.slice(indexImage, indexImage + 20);\n  loader.classList.remove(`loader`);\n  gallery.insertAdjacentHTML('afterbegin', addImages(displayImage));\n  galleryModal.refresh();\n\n  if (imageArrow.length >= 21) {\n    buttonMoreImages.classList.add(`is-visibal`);\n  }\n}\n// ----------------------------------\n\nfunction downloadsMoreImages() {\n  indexImage += 20;\n\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    addImages(objectFromServer.slice(indexImage, indexImage + 20))\n  );\n  if (indexImage + 21 >= objectFromServer.length) {\n    buttonMoreImages.classList.remove(`is-visibal`);\n  }\n  galleryModal.refresh();\n}\n\nfunction addImages(arrow) {\n  let listCode = ``;\n  arrow.forEach(image => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = image;\n\n    listCode += `<li class=\"gallery-item\">\n          <a class=\"link\" href=\"${largeImageURL}\">\n            <img class=\"form-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <ul class=\"description-list\">\n              <li class=\"description-item\">\n                <p class=\"text-\">Likes</p>\n                <p class=\"number\">${likes}</p>\n              </li>\n              <li class=\"description-item\">\n                <p class=\"text-\">Views</p>\n                <p class=\"number\">${views}</p>\n              </li>\n              <li class=\"description-item\">\n                <p class=\"text-\">Comments</p>\n                <p class=\"number\">${comments}</p>\n              </li>\n              <li class=\"description-item\">\n                <p class=\"text-\">Downloads</p>\n                <p class=\"number\">${downloads}</p>\n              </li>\n            </ul>\n          </a>\n        </li>`;\n  });\n  return listCode;\n}\n// ------------------------\n\nconst galleryModal = new SimpleLightbox('.gallery .link', {\n  captionsData: `alt`,\n  captionDelay: 250,\n});\n"],"names":["indexImage","objectFromServer","gallery","loader","form","formSearch","buttonMoreImages","downloadsMoreImages","event","userText","iziToast","urlSearch","response","answerFromServer","galleryCreate","error","imageArrow","displayImage","addImages","galleryModal","arrow","listCode","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox"],"mappings":"6vBACA,IAAIA,EAAa,EACbC,EAIJ,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,OAAO,QAAQ,EAEhC,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAU,EAE1C,SACG,cAAc,eAAe,EAC7B,mBACC,YACA,sDACJ,EACA,MAAMC,EAAmB,SAAS,cAAc,gBAAgB,EAChEA,EAAiB,iBAAiB,QAASC,CAAmB,EAG9D,SAASF,EAAWG,EAAO,CACzBA,EAAM,eAAc,EACpB,IAAIC,EAAWD,EAAM,OAAO,SAAS,OAAO,MAAM,OAElD,GAAIC,IAAa,GAAI,CACnBC,EAAS,KAAK,CACZ,QAAS,4BACT,SAAU,WACV,MAAO,KACb,CAAK,EACD,MACD,CAEDN,EAAK,MAAK,EACVF,EAAQ,UAAY,GACpBI,EAAiB,UAAU,OAAO,YAAY,EAC9CH,EAAO,UAAU,IAAI,QAAQ,EAW7B,MAAMQ,EAAY,4BATC,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAG,GAAGF,IACN,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACd,CAAG,EAAE,SAAQ,IAGX,MAAME,CAAS,EACZ,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAoB,CACxB,GAAIA,EAAiB,KAAK,SAAW,EAAG,CACtCV,EAAO,UAAU,OAAO,QAAQ,EAChCO,EAAS,KAAK,CACZ,QACE,6EACF,SAAU,WACV,MAAO,KACjB,CAAS,EACDJ,EAAiB,UAAU,OAAO,YAAY,EAC9C,MACD,CACDQ,EAAcD,EAAiB,IAAI,CACzC,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAASD,EAAcE,EAAY,CACjChB,EAAa,EACbC,EAAmBe,EACnB,IAAIC,EAAeD,EAAW,MAAMhB,EAAYA,EAAa,EAAE,EAC/DG,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAQ,mBAAmB,aAAcgB,EAAUD,CAAY,CAAC,EAChEE,EAAa,QAAO,EAEhBH,EAAW,QAAU,IACvBV,EAAiB,UAAU,IAAI,YAAY,CAE/C,CAGA,SAASC,GAAsB,CAC7BP,GAAc,GAEdE,EAAQ,mBACN,YACAgB,EAAUjB,EAAiB,MAAMD,EAAYA,EAAa,EAAE,CAAC,CACjE,EACMA,EAAa,IAAMC,EAAiB,QACtCK,EAAiB,UAAU,OAAO,YAAY,EAEhDa,EAAa,QAAO,CACtB,CAEA,SAASD,EAAUE,EAAO,CACxB,IAAIC,EAAW,GACf,OAAAD,EAAM,QAAQE,GAAS,CACrB,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJD,GAAY;AAAA,kCACkBG;AAAA,yCACOD,WAAsBE;AAAA;AAAA;AAAA;AAAA,oCAI3BC;AAAA;AAAA;AAAA;AAAA,oCAIAC;AAAA;AAAA;AAAA;AAAA,oCAIAC;AAAA;AAAA;AAAA;AAAA,oCAIAC;AAAA;AAAA;AAAA;AAAA,cAKpC,CAAG,EACMR,CACT,CAGA,MAAMF,EAAe,IAAIW,EAAe,iBAAkB,CACxD,aAAc,MACd,aAAc,GAChB,CAAC"}