{"version":3,"file":"commonHelpers.js","sources":["../src/js/my-mod.js","../src/js/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\nexport function addHtmlOnPage(arrow) {\n  let listCode = ``;\n  arrow.forEach(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      listCode += `<li class=\"gallery-item\">\n          <a class=\"link\" href=\"${largeImageURL}\">\n            <img class=\"form-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <ul class=\"description-list\">\n              <li class=\"description-item\">\n                <p class=\"text-\">Likes</p>\n                <p class=\"number\">${likes}</p>\n              </li>\n              <li class=\"description-item\">\n                <p class=\"text-\">Views</p>\n                <p class=\"number\">${views}</p>\n              </li>\n              <li class=\"description-item\">\n                <p class=\"text-\">Comments</p>\n                <p class=\"number\">${comments}</p>\n              </li>\n              <li class=\"description-item\">\n                <p class=\"text-\">Downloads</p>\n                <p class=\"number\">${downloads}</p>\n              </li>\n            </ul>\n          </a>\n        </li>`;\n    }\n  );\n  return listCode;\n}\n\nexport async function searchImageOnServer(serchText, page) {\n  const parameters = new URLSearchParams({\n    key: `41274788-792c8d92905fcf9da75194117`,\n    q: `${serchText}`,\n    image_type: `photo`,\n    orientation: `horizontal`,\n    safesearch: `true`,\n    per_page: 40,\n    page: page,\n  }).toString();\n  const response = await axios.get(`https://pixabay.com/api/?${parameters}`);\n  return response.data;\n}\nexport function scroll() {\n  // let height =\n  //   document.querySelector(`.gallery-item`).getBoundingClientRect().height * 2;\n\n  const height = window.innerHeight - 100;\n  //100 ==  button_height + padding\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n","'use strict';\nlet curentPage;\nlet userText;\nlet totalPage;\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// ------------inport my-mod.js\nimport * as mymod from './my-mod.js';\nconst gallery = document.querySelector(`.gallery`);\nconst loader = document.querySelector(`.loader`);\nloader.classList.remove(`loader`);\nconst form = document.querySelector(`.form`);\n\nconst galleryModal = new SimpleLightbox(`.gallery .link`, {\n  captionsData: `alt`,\n  captionDelay: 250,\n});\n\n// --------------add-button-load-more----\ndocument\n  .querySelector(`.page-section`)\n  .insertAdjacentHTML(\n    'beforeend',\n    `<button class=\"download-more\">Load more</button>`\n  );\nconst buttonLoad = document.querySelector(`.download-more`);\n\nform.addEventListener(`submit`, async event => {\n  event.preventDefault();\n  userText = event.target.elements.search.value.trim();\n\n  if (userText === ``) {\n    iziToast.show({\n      message: `❌ Field must be filled in`,\n      position: `topRight`,\n      color: `red`,\n    });\n    return;\n  }\n  loader.classList.add(`loader`);\n  curentPage = 1;\n  form.reset();\n  gallery.innerHTML = ``;\n\n  try {\n    const list = await mymod.searchImageOnServer(userText, curentPage);\n    if (list.hits.lenght === 0) {\n      loader.classList.remove(`loader`);\n      iziToast.show({\n        message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n        position: `topRight`,\n        color: `red`,\n      });\n      buttonLoad.classList.remove(`is-visibal`);\n      return;\n    }\n\n    loader.classList.remove(`loader`);\n    gallery.insertAdjacentHTML('afterbegin', mymod.addHtmlOnPage(list.hits));\n    galleryModal.refresh();\n\n    totalPage = Math.ceil(list.totalHits / 40);\n    if (curentPage < totalPage) {\n      buttonLoad.classList.add(`is-visibal`);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n\n// --------------add-listener-button-----\n\nbuttonLoad.addEventListener(`click`, async () => {\n  buttonLoad.classList.remove(`is-visibal`);\n  loader.classList.add(`loader`);\n  curentPage++;\n\n  try {\n    const list = await mymod.searchImageOnServer(userText, curentPage);\n    loader.classList.remove(`loader`);\n    gallery.insertAdjacentHTML('beforeend', mymod.addHtmlOnPage(list.hits));\n    galleryModal.refresh();\n\n    if (totalPage === curentPage) {\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: `topRight`,\n        color: `blue`,\n      });\n      return;\n    }\n    buttonLoad.classList.add(`is-visibal`);\n    mymod.scroll();\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"names":["addHtmlOnPage","arrow","listCode","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchImageOnServer","serchText","page","parameters","axios","scroll","height","curentPage","userText","totalPage","gallery","loader","form","galleryModal","SimpleLightbox","buttonLoad","event","iziToast","list","mymod.searchImageOnServer","mymod.addHtmlOnPage","error","mymod.scroll"],"mappings":"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"}